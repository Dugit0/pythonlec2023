def det4(r0, r1, r2, r3):
    def det3(r0, r1, r2):
        pos = r0[0]*r1[1]*r2[2] + r0[1]*r1[2]*r2[0] + r0[2]*r1[0]*r2[1]
        neg = r0[2]*r1[1]*r2[0] + r0[1]*r1[0]*r2[2] + r0[0]*r1[2]*r2[1]
        return pos - neg
    a0 = r0[0] * det3(r1[1:], r2[1:], r3[1:])
    a1 = r1[0] * det3(r0[1:], r2[1:], r3[1:])
    a2 = r2[0] * det3(r0[1:], r1[1:], r3[1:])
    a3 = r3[0] * det3(r0[1:], r1[1:], r2[1:])
    return a0 - a1 + a2 - a3

